<!DOCTYPE html>
{% csrf_token %}
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Telegram Login</title>
</head>
<body style='background-color: rgb(14, 14, 14)'>

<script async src="https://telegram.org/js/telegram-widget.js?19" data-telegram-login="ArtifactAuthBot" data-size="large" data-onauth="onTelegramAuth(user)"></script>
<script type="text/javascript">
  function onTelegramAuth(user) {
    fetch('http://www.artifactai.ru/api/v1/auth/telegram/', {
        method: "POST",
        headers: {
            'Content-Type': 'application/json;charset=UTF-8',
        },
        body: JSON.stringify(user)
    })
    .then(res => res.json())
    .then(data => console.log('ID: ' + data.user_id + '\nToken: ' + data.access_token))
  }
</script>

</body>
</html>